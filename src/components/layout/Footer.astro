---
const currentYear = new Date().getFullYear();

import { fetchGeneralData } from "../../utils/dataMapping.ts";

const Data = await fetchGeneralData();
const { footer, logo, companyName } = Data;
---

<footer
  class="mx-auto my-20 max-w-[1320px] max-md:my-10 max-md:rounded-3xl relative"
>
  <div class="flex flex-wrap gap-10 text-base">
    <div class="grow shrink-0 basis-0 w-fit max-md:max-w-full">
      <div
        class="px-9 py-8 w-full rounded-3xl bg-neutral-800 max-w-[1320px] max-md:px-5 max-md:max-w-full"
      >
        <div
          class="flex flex-wrap gap-5 justify-between items-start w-full text-white max-w-[1081px] max-md:max-w-full"
        >
          <div class="leading-6 max-md:max-w-full">
            <a href="/"><img
              src={logo}
              alt={`${companyName} Logo`}
              class="object-contain max-w-full aspect-[4.55] w-[159px]"
            /></a>
            <p class="mt-2.5 max-md:max-w-full text-white" set:html={footer.description}>
              
            </p>
          </div>
          <nav class="flex flex-col items-start">
            {footer.navColumn1.links.map((link) => (
              <a href={link.url} class="hover:underline">{link.text}</a>
            ))}
          </nav>
          <nav class="flex flex-col whitespace-nowrap">
            {footer.navColumn2.links.map((link) => (
              <a href={link.url} class="hover:underline">{link.text}</a>
            ))}
          </nav>
        </div>
        <div
          class="flex flex-wrap gap-5 justify-between items-start mt-16 w-full max-md:mt-10 max-md:max-w-full"
        >
          <form class="flex flex-wrap gap-4 w-1/2 max-md:w-full">
            <input
              type="email"
              placeholder={footer.emailPlaceholder}
              class="overflow-hidden grow shrink-0 px-4 py-3.5 text-black whitespace-nowrap rounded-lg basis-0 bg-stone-100 w-fit max-md:pr-5 max-md:max-w-full"
            />
            <button
              type="submit"
              class="overflow-hidden p-4 font-semibold leading-snug text-center text-white bg-[#5E81E9] rounded-lg hover:bg-indigo-600 transition-colors"
            >
              {footer.signUpButtonText}
            </button>
          </form>
          <div class="flex flex-wrap gap-10 mt-5 text-white max-md:max-w-full">
            <p class="my-auto text-white opacity-50">{footer.copyrightText.replace('{year}', currentYear.toString())} {currentYear}</p>
            <button id="back-to-top"
              class="px-6 py-2 text-base text-white rounded-[12px] border border-solid border-[rgba(255,255,255,0.53)] bg-[linear-gradient(96deg,rgba(93,131,196,0.5)_0%,rgba(93,131,196,0.1)_100%)] cursor-pointer"
            >
              {footer.backToTopText}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<script defer>
document.addEventListener("DOMContentLoaded", () => {
  // Back to top button functionality
  const backToTopButton = document.getElementById("back-to-top");
  if (backToTopButton) {
    backToTopButton.addEventListener("click", (event) => {
      event.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  }
  
  // Handle navigation links for smooth scrolling
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      
      const targetId = this.getAttribute('href');
      if (targetId === '#') return;
      
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        targetElement.scrollIntoView({
          behavior: 'smooth'
        });
      }
    });
  });
});
</script>
