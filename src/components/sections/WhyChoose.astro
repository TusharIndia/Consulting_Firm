---
// Define the interface for the content object
interface WhyChooseContent {
  title: string;
  content: {
    paragraph1: string;
    paragraph2?: string;
  };
  imageUrl: string;
  imageAlt: string;
}

// Define default content
const defaultContent: WhyChooseContent = {
  title: "Why Choose Transcranial Magnetic Stimulation (TMS)?",
  content: {
    paragraph1: "TMS offers a transformative option for individuals seeking relief from symptoms of depression and other mental health conditions. Unlike medications, which can have side effects or may not work for everyone, TMS directly stimulates the brain to encourage natural healing and improved functionality. This non-invasive treatment is well-tolerated, requires no anesthesia, and involves no downtime, making it a convenient and accessible solution for busy individuals.",
    paragraph2: "For those with dual diagnoses or treatment-resistant conditions, TMS complements other therapies to create a comprehensive and effective pathway to recovery. By focusing on targeted areas of the brain, TMS fosters emotional stability, enhances daily functioning, and helps individuals regain control of their mental health."
  },
  imageUrl: "/imgs/why_choose_us.png",
  imageAlt: "Medical consultation scene showing a healthcare professional examining a patient lying on an examination table in a modern medical office"
};

// Accept content prop with default value
const { content = defaultContent } = Astro.props;

// Get the title components
const firstPart = content.title.includes("Magnetic") 
  ? content.title.substring(0, content.title.indexOf("Magnetic")).trim() 
  : content.title;

const tmsText = "Magnetic Stimulation (TMS)";

const lastPart = content.title.includes("Magnetic") && content.title.indexOf("Magnetic") + tmsText.length < content.title.length 
  ? content.title.substring(content.title.indexOf("Magnetic") + tmsText.length).trim()
  : "";
---

<section class="mx-auto my-16 max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="box-border flex flex-col gap-8 items-start w-full">
        <header class="w-full mb-4">
            <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-semibold leading-tight text-center w-full leading-relaxed space-y-3">
            <span class="text-neutral-800">{firstPart}</span>
            <span class="text-[#556BF4]">{tmsText}</span>
            {lastPart && <span class="text-neutral-800">{lastPart}</span>}
            </h2>
        </header>

        <article class="text-base sm:text-lg leading-relaxed text-neutral-700 opacity-90 mb-8 w-full max-w-4xl mx-auto">
            <p class="text-center sm:text-left">
                {content.content.paragraph1}
            </p>
            <br />
            {content.content.paragraph2 && (
              <p class="text-center sm:text-left">
                  {content.content.paragraph2}
              </p>
            )}
        </article>

        <div class="flex gap-6 items-center justify-center w-full max-w-[600px] mx-auto mb-10 max-sm:flex-col">
            <a href="/contact" class="flex flex-col gap-2.5 justify-center items-center px-8 py-4 bg-amber-300 cursor-pointer rounded-[50px] min-w-[200px] flex-1 max-sm:w-full hover:bg-amber-400 transition-colors">
                <span class="text-base font-semibold text-neutral-800">
                    Get Started
                </span>
            </a>

            <a href={`tel:${1234567890}`} class="flex flex-col gap-2.5 justify-center items-center px-8 py-4 bg-[#562987] cursor-pointer rounded-[50px] min-w-[200px] flex-1 max-sm:w-full hover:bg-[#4a2373] transition-colors">
                <div class="flex flex-col items-center">
                    <span class="text-sm text-white">
                        Have a question?
                    </span>
                    <span class="text-sm font-bold text-white">
                        Call (123) 456-7890
                    </span>
                </div>
            </a>
        </div>
    </div>
    
    <div class="w-full max-w-5xl mx-auto mt-8">
        <figure class="w-full overflow-hidden rounded-2xl shadow-md border-8 border-white bg-white p-1">
            <img
                src={content.imageUrl}
                alt={content.imageAlt}
                class="w-full h-auto object-cover aspect-[16/9] rounded-lg"
            />
        </figure>
    </div>
</section>